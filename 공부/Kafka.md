# π“΅ Kafka
## Kafka νΉμ§•

### 1. λΉ λ¥Έ λ°μ΄ν„° μμ§‘μ΄ κ°€λ¥ν• λ†’μ€ μ²λ¦¬λ‰
HTTP κΈ°λ°μΌλ΅ μ „λ‹¬λλ” μ΄λ²¤νΈμΌμ§€λΌλ„ μ΄λ²¤νΈκ°€ μΉ΄ν”„μΉ΄λ΅ μ²λ¦¬λλ” μ‘λ‹µμ‹κ°„μ€ λ¶κ³Ό ν• μλ¦Ώμμ msλ‹¨μ„λ΅ μ²λ¦¬λμµλ‹λ‹¤. μ΄λ¥Ό ν†µν•΄ κ΄‘λ²”μ„ν• λ°μ΄ν„° νλ¦„ λ„μ… κ°€λ¥
### 2. μμ„ λ³΄μ¥
μ΄λ²¤νΈ μ²λ¦¬ μμ„κ°€ λ³΄μ¥λλ©΄μ„, μ—”ν‹°ν‹° κ°„μ μ ν¨μ„± κ²€μ‚¬λ‚ λ™μ‹ μμ • κ°™μ€ λ¬΄μν• λ³µμ΅μ„± λ“¤μ΄ μ κ±°λ¨μΌλ΅μ¨ κµ¬μ΅° λν• λ§¤μ° κ°„κ²°ν•λ‹¤.
### 3. μ μ–΄λ„ ν•λ² μ „μ†΅ λ°©μ‹
λ¶„μ‚° λ„¤νΈμ›ν¬ ν™κ²½μ—μ„ λ°μ΄ν„° μ²λ¦¬μ—μ„ μ¤‘μ”ν• λ¨λ²” μ‚¬λ΅€λ” **λ©±λ“±μ„±**μ…λ‹λ‹¤. λ©±λ“±μ„±μ΄λ€ λ™μΌν• μ‘μ—…μ„ μ—¬λ¬ λ² μν–‰ν•λ”λΌλ„ κ²°κ³Όκ°€ λ‹¬λΌμ§€μ§€ μ•λ” κ²ƒμ„ μλ―Έν•©λ‹λ‹¤.  
λ”°λΌμ„ ν”„λ΅λ“€μ„κ°€ μ¬μ „μ†΅μ„ ν•λ”λΌλ„ λ°μ΄ν„° λ³€ν™”λ” μΌμ–΄λ‚μ§€ μ•μµλ‹λ‹¤. μ°¨μ„ μ±…μΈ 'μ μ–΄λ„ ν• λ²' μ „μ†΅ λ°©μ‹μ„ μ‚¬μ©ν•λ”λΌλ„ κ°„νΉ μ΄λ²¤νΈλ“¤μ΄ μ¤‘λ³µ λ°μƒν•  μλ” μμΌλ‚ λ„λ½ μ—†λ” μ¬μ „μ†΅μ΄ κ°€λ¥ν•λ―€λ΅ λ©”μ‹μ§€ μ†μ‹¤μ— λ€ν• κ±±μ •μ΄ μ‚¬λΌμ§‘λ‹λ‹¤. λν• λ°±μ—”λ“ μ‹μ¤ν…λ“¤μ΄ μ¤‘λ³µ λ©”μ‹μ§€ μ²λ¦¬κ°€ κ°€λ¥ν•λ„λ΅ ν—μ©λλ‹¤λ©΄ λ³µμ΅ν• νΈλμ­μ… μ²λ¦¬κ°€ ν•„μ”μ—†κ² λ©λ‹λ‹¤. μ΄λ΅μΈν•΄ μ•„ν‚¤ν…μ²λ” λ”μ± λ‹¨μν•΄μ§€κ³  μ²λ¦¬λ‰ λν• λ†’μ•„μ§‘λ‹λ‹¤.
### 4. μμ—°μ¤λ¬μ΄ λ°±ν”„λ μ…” ν•Έλ“¤λ§
μΉ΄ν”„μΉ΄μ ν΄λΌμ΄μ–ΈνΈλ” pull λ°©μ‹μ„ μ‚¬μ©ν•©λ‹λ‹¤.  
pull λ°©μ‹μ μ¥μ μ€ ν΄λΌμ΄μ–ΈνΈ μκΈ° μμ‹ μ μ†λ„λ΅ λ°μ΄ν„°λ¥Ό μ²λ¦¬ν•  μ μλ‹¤.  
push λ°©μ‹μ€ λΈλ΅μ»¤κ°€ λ³΄λ‚΄λ” μ†λ„μ— μμ΅΄ν•΄μ•Ό ν•λ‹¤λ” ν•κ³„κ°€ μμµλ‹λ‹¤.  
μ„±λ¥κ³Ό νΈλ¦¬ν•¨μ— μ§‘μ¤‘ν•κ³ μ ν’€ λ°©μ‹μ„ μ±„νƒ£ν• μΉ΄ν”„μΉ΄ ν΄λΌμ΄μ–ΈνΈλ” λ³µμ΅ν• ν”Όλ“λ°±μ΄λ‚ μ ν•μ μ”κµ¬μ‚¬ν•­μ΄ μ‚¬λΌμ Έ κ°„λ‹¨ν•κ³  νΈλ¦¬ν•κ² ν΄λΌμ΄μ–ΈνΈλ¥Ό κµ¬ν„ν•  μ μλ‹¤.
### 5. κ°•λ ¥ν• νν‹°μ…”λ‹
μΉ΄ν”„μΉ΄μ νν‹°μ…”λ‹ κΈ°λ¥μ„ μ΄μ©ν•λ©΄, λ…Όλ¦¬μ μΌλ΅ ν† ν”½μ„ μ—¬λ¬ κ°λ΅ λ‚λ μ μμµλ‹λ‹¤. λν• νν‹°μ…μ— μ μ ν• ν‚¤λ¥Ό ν• λ‹Ήν•κΈ° μ„ν• μ—¬λ¬ κ³ λ ¤μ‚¬ν•­μ΄ μμ§€λ§, κ° νν‹°μ…λ“¤μ„ λ‹¤λ¥Έ νν‹°μ…λ“¤κ³Ό κ΄€κ³„μ—†μ΄ μ²λ¦¬ν•  μ μμΌλ―€λ΅ ν¨κ³Όμ μΈ μν‰ ν™•μ¥μ΄ κ°€λ¥ν•΄μ΅μµλ‹λ‹¤.
### 6. ETC
λ΅κ·Έ μ»΄ν©μ… κΈ°λ¥μ„ ν†µν•΄ μ¤λƒ…μƒ· μ—­ν• μ΄ κ°€λ¥ν•΄μ΅κ³ , μƒλ΅μ΄ μ• ν”λ¦¬μΌ€μ΄μ…μ΄ λ‚μ¤‘μ— μ½μ–΄κ°€λ” λ°©μ‹λ„ λ¬Έμ  μ—†μ΄ μ²λ¦¬κ°€λ¥  
ν”„λ΅λ“€μ„μ™€ μ»¨μλ¨Έκ°€ μ™„λ²½ν•κ² λ¶„λ¦¬λ λΉ„λ™κΈ° λ°©μ‹μ„ μ‚¬μ©ν•¨μ— λ”°λΌ μ• ν”λ¦¬μΌ€μ΄μ…μ λ³‘λ© ν„μƒμ„ μ •ν™•ν•κ² νμ•…ν•  μ μμ—κ³ , λ¨λ‹ν„°λ§μ„ ν†µν•΄ μ§€μ—°μ— λ€ν• λ¬Έμ λ¥Ό λΉ λ¥΄κ² ν•΄κ²° κ°€λ¥
  
## π¬ μ΄λ²¤νΈ λ²„μ¤ vs μΉ΄ν”„μΉ΄
μ΄λ²¤νΈ λ²„μ¤ : κ°λ°μκ°€ μ§€μ •ν• κ°μ μ»΄ν¬λ„νΈ κ°„μ— λ°μ΄ν„°λ¥Ό μ£Όκ³ λ°›μ„ μ μλ” λ°©λ²• & μ΄λ²¤νΈ λ²„μ¤ μ‚¬μ© μ‹ μƒμ„-ν•μ„ μ»΄ν¬λ„νΈ κµ¬μ΅°λ¥Ό μ μ§€ν•μ§€ μ•μ•„λ„ λ‹¤λ¥Έ μ»΄ν¬λ„νΈλ΅ λ°μ΄ν„° μ „λ‹¬μ΄ κ°€λ¥ν•λ‹¤.
### μ΄λ²¤νΈ λ²„μ¤
- μ΄λ²¤νΈ λ²„μ¤λ” μ„λΉ™ λ μ΄μ–΄μ™€ μ¤ν† λ¦¬μ§€ λ μ΄μ–΄κ°€ λ¶„λ¦¬λμ–΄ μμ–΄ μ¶”κ°€μ μΈ ν™‰μ΄ ν•„μ”ν•λ‹¤.
- μ΄λ²¤νΈ λ²„μ¤λ” fsync()λ΅ λΈ”λ΅ν‚Ή
- λ” λ§μ€ ν•λ“μ›¨μ–΄ μμ› ν•„μ”
### μΉ΄ν”„μΉ΄
- μΉ΄ν”„μΉ΄λ” ν•λ‚μ ν”„λ΅μ„Έμ¤μ—μ„ μ¤ν† λ¦¬μ§€μ™€ μ”μ²­μ„ λ¨λ‘ μ²λ¦¬
- OSμ— μμ΅΄μ— λ°±λ“λΌμ΄λ“λ΅ fsync()λ¥Ό μ²λ¦¬ μ λ΅μΉ΄ν”Όλ¥Ό μ‚¬μ©
- λΉ„κµμ  μ μ€ ν•λ“μ›¨μ–΄ μμ›
> [μ λ΅μΉ΄ν”Ό](https://soft.plusblog.co.kr/) : CPUμ κ°μ…μ„ λ°›μ§€ μ•κ³  ν• λ©”λ¨λ¦¬μ μμ—­μ—μ„ λ‹¤λ¥Έ λ©”λ¨λ¦¬μ μμ—­μΌλ΅ λ°μ΄ν„°λ¥Ό μΉ΄ν”Όν•λ” μ‘μ—…μ„ λ§ν•λ‹¤.  
μ΄λ” CPU μ‚¬μ΄ν΄μ„ μ μ•½ν•μ—¬μ„ λ„¤νΈμ›ν¬λ‚ SSDμ™€ κ°™μ΄ λΉ λ¥Έ λ°μ΄ν„°κ°€ ν•„μ”ν• μ‹μ¤ν…μ—μ„ μ μ©ν•κ² μ΄μ©λλ‹¤.



---
μ°Έκ³ λ„μ„ 
> μ‹¤μ „ μΉ΄ν”„μΉ΄ κ°λ°λ¶€ν„° μ΄μκΉμ§€ (κ³ μλ§ μ§€μ)

